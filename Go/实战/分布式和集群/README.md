# 分布式和集群

分布式和集群的总体概述

## 分布式与集群

[分布式和集群的区别究竟是什么？](https://cloud.tencent.com/developer/article/1579435)

分布式可繁也可以简，最简单的分布式就是大家最常用的，在[负载均衡](https://cloud.tencent.com/product/clb?from=10680)[服务器](https://cloud.tencent.com/product/cvm?from=10680)后加一堆web服务器，然后在上面搞一个缓存服务器来保存临时状态，后面共享一个[数据库](https://cloud.tencent.com/solution/database?from=10680)，其实很多号称分布式专家的人也就停留于此，大致结构如下图所示：

![img](https://raw.githubusercontent.com/Simin-hub/Picture/master/img/mkpa7tplm5.jpeg)

这种环境下真正进行分布式的只是web server而已，并且web server之间没有任何联系，所以结构和实现都非常简单。

有些情况下，对分布式的需求就没这么简单，在每个环节上都有分布式的需求，比如Load Balance、DB、Cache和文件等等，并且当分布式节点之间有关联时，还得考虑之间的通讯，另外，节点非常多的时候，得有监控和管理来支撑。

这样看起来，分布式是一个非常庞大的体系，只不过你可以根据具体需求进行适当地裁剪。按照最完备的分布式体系来看，可以由以下模块组成：

![img](https://raw.githubusercontent.com/Simin-hub/Picture/master/img/c7rd9afciz.jpeg)

- **分布式任务处理服务：**负责具体的业务逻辑处理
- **分布式节点注册和查询：**负责管理所有分布式节点的命名和物理信息的注册与查询，是节点之间联系的桥梁
- **分布式DB：**分布式结构化数据存取
- **分布式Cache：**分布式缓存数据（非持久化）存取
- **分布式文件：**分布式文件存取
- **网络通信：**节点之间的网络数据通信
- **监控管理：**搜集、监控和诊断所有节点运行状态
- **分布式编程语言：**用于分布式环境下的专有编程语言，比如Elang、Scala
- **分布式算法：**为解决分布式环境下一些特有问题的算法，比如解决一致性问题的Paxos算法

因此，若要深入研究云计算和分布式，就得深入研究以上领域，而这些领域每一块的水都很深，都需要很底层的知识和技术来支撑，所以说，对于想提升技术的开发者来说，以分布式来作为切入点是非常好的，可以以此为线索，探索计算机世界的各个角落。

**集群是个物理形态，分布式是个工作方式。**

只要是一堆机器，就可以叫集群，他们是不是一起协作着干活，这个谁也不知道；一个程序或系统，只要运行在不同的机器上，就可以叫分布式，嗯，C/S架构也可以叫分布式。

**集群一般是物理集中、统一管理的，而分布式系统则不强调这一点。**

所以，集群可能运行着一个或多个分布式系统，也可能根本没有运行分布式系统；**分布式系统可能运行在一个集群上，也可能运行在不属于一个集群的多台（2台也算多台）机器上**。

分布式是相对中心化而来，强调的是任务在多个物理隔离的节点上进行。中心化带来的主要问题是可靠性，若中心节点宕机则整个系统不可用，分布式除了解决部分中心化问题，也倾向于分散负载，但分布式会带来很多的其他问题，最主要的就是一致性。

**集群就是逻辑上处理同一任务的机器集合**，可以属于同一机房，也可分属不同的机房。分布式这个概念可以运行在某个集群里面，某个集群也可作为分布式概念的一个节点。

**一句话，就是：“分头做事”与“一堆人”的区别**

分布式是指**将不同的业务分布在不同的地方**。而集群指的是**将几台服务器集中在一起，实现同一业务**。

**分布式中的每一个节点，都可以做集群。而集群并不一定就是分布式的。**

> 举例：就比如新浪网，访问的人多了，他可以做一个群集，前面放一个响应服务器，后面几台服务器完成同一业务，如果有业务访问的时候，响应服务器看哪台服务器的负载不是很重，就将给哪一台去完成。

而分布式，从窄意上理解，也跟集群差不多， 但是它的组织比较松散，不像集群，有一个组织性，一台服务器垮了，其它的服务器可以顶上来。

**分布式的每一个节点，都完成不同的业务，一个节点垮了，哪这个业务就不可访问了**。

**简单说，分布式是以缩短单个任务的执行时间来提升效率的，而集群则是通过提高单位时间内执行的任务数来提升效率。**

> 例如：如果一个任务由10个子任务组成，每个子任务单独执行需1小时，则在一台服务器上执行该任务需10小时。

采用分布式方案，提供10台服务器，每台服务器只负责处理一个子任务，不考虑子任务间的依赖关系，执行完这个任务只需一个小时。(这种工作模式的一个典型代表就是Hadoop的Map/Reduce分布式计算模型）

而采用集群方案，同样提供10台服务器，每台服务器都能独立处理这个任务。假设有10个任务同时到达，10个服务器将同时工作，1小时后，10个任务同时完成，这样，整身来看，还是1小时内完成一个任务！

### 总结

**集群一般被分为三种类型，高可用集群如RHCS、LifeKeeper等，负载均衡集群如LVS等、高性能运算集群;分布式应该是高性能运算集群范畴内。**

- **分布式**：**不同的业务模块部署在不同的服务器上或者同一个业务模块分拆多个子业务，部署在不同的服务器上，解决高并发的问题**
- **集群**：**同一个业务部署在多台机器上，提高系统可用性**

**大白话讲**

小饭店原来只有一个厨师，切菜洗菜备料炒菜全干。后来客人多了，厨房一个厨师忙不过来，又请了个厨师，两个厨师都能炒一样的菜，这两个厨师的关系是集群。

为了让厨师专心炒菜，把菜做到极致，又请了个配菜师负责切菜，备菜，备料，厨师和配菜师的关系是分布式，一个配菜师也忙不过来了，又请了个配菜师，两个配菜师关系是集群。

## 分布式与微服务

[参考](https://blog.csdn.net/qq_29944927/article/details/107442643)

[分布式](https://so.csdn.net/so/search?q=分布式&spm=1001.2101.3001.7020)和微服务是什么关系？简单来说，分布式和微服务的概念比较相似，**分布式属于微服务**。但是分布式和微服务在架构、作用和粒度上有所区别。因此，两者的关系是既相互联系又相互区别。本文主要带大家认识分布式和微服务，并探讨一下两者的关系，感兴趣的小伙伴可以接着看下去。

### [微服务](https://so.csdn.net/so/search?q=微服务&spm=1001.2101.3001.7020)

**微服务的意思也就是将模块拆分成一个独立的服务单元通过接口来实现数据的交互**。简单来说微服务就是很小的服务，小到一个服务只对应一个单一的功能，只做一件事。这个服务可以单独部署运行，服务之间可以通过[RPC](https://so.csdn.net/so/search?q=RPC&spm=1001.2101.3001.7020)来相互交互，每个微服务都是由独立的小团队开发，测试，部署，上线，负责它的整个生命周期。

### 分布式

**分布式服务顾名思义服务是分散部署在不同的机器上的，一个服务可能负责几个功能，是一种面向SOA[架构](https://so.csdn.net/so/search?q=架构&spm=1001.2101.3001.7020)的，服务之间也是通过rpc来交互或者是webservice来交互的**。逻辑架构设计完后就该做物理架构设计，系统应用部署在超过一台服务器或虚拟机上，且各分开部署的部分彼此通过各种通讯协议交互信息，就可算作分布式部署，生产环境下的微服务肯定是分布式部署的，分布式部署的应用不一定是微服务架构的，比如集群部署，它是把相同应用复制到不同服务器上，但是逻辑功能上还是单体应用。

### 关系

联系：**分布式只是一种手段**，把不同的机器分散在不同的地方，然后这些机器间相互协助完成业务。**微服务是一种特殊的分布式**，换句话说，微服务架构是分布式服务架构的子集。微服务架构通过更细粒度的服务切分，使得整个系统的迭代速度并行程度更高，但是运维的复杂度和性能会随着服务的粒度更细而增加。微服务重在解耦合，使每个模块都独立。分布式重在资源共享与加快计算机计算速度。

区别：

（1）架构不同：微服务的设计是为了不因为某个模块的升级和BUG影响现有的系统业务。微服务与分布式的细微差别是，**微服务的应用不一定是分散在多个服务器上，他也可以是同一个服务器**。

（2）作用不同：分布式：**不同模块部署在不同服务器上，分布式主要解决的是网站高并发带来问题**。微服务：**各服务可独立应用**，组合服务也可系统应用。

（3）粒度不同：**微服务相比分布式服务来说，它的粒度更小，服务之间耦合度更低**，由于每个微服务都由独立的小团队负责，因此它敏捷性更高，分布式服务最后都会向微服务架构演化，这是一种趋势， 不过服务微服务化后带来的挑战也是显而易见的，例如服务粒度小，数量大，后期运维将会很难。

## 分布式事务



## 全局ID



## 分布式锁



## 一致性算法

